# Python Django Tutorial: Deploying Your Application (Option #2) - Deploy using Heroku - YouTube

## Key Insights

### Introduction
- Deploy Django application using Heroku to make it accessible via the internet.
- Heroku abstracts the complexities of setting up web servers, offering a free tier for initial deployment.

### Prerequisites
1. **Create a Heroku Account**: Sign up on the Heroku website.
2. **Install Git**: Version control system, essential for Heroku deployment.
3. **Install Heroku CLI**: Command-line interface for Heroku commands.

### Setting Up Heroku
- **Heroku CLI Login**: 
  ```bash
  heroku login
  ```
  Opens browser for Heroku account login.

### Preparing the Django Project
1. **Create `requirements.txt`**:
   ```bash
   pip install gunicorn
   pip freeze > requirements.txt
   ```
2. **Initialize Git Repository**:
   ```bash
   git init
   git add -A
   git commit -m "Initial commit"
   ```

### Configuring Git for Heroku
1. **Create Heroku App**:
   ```bash
   heroku create my-django-app
   ```
2. **Push to Heroku**:
   ```bash
   git push heroku master
   ```

### Handling Static Files
1. **Set `STATIC_ROOT` in `settings.py`**:
   ```python
   STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')
   ```
2. **Commit Changes**:
   ```bash
   git add .
   git commit -m "Add STATIC_ROOT"
   git push heroku master
   ```

### Procfile Creation
- **Create `Procfile`**:
   ```bash
   web: gunicorn myproject.wsgi
   ```
- **Commit and Push**:
   ```bash
   git add Procfile
   git commit -m "Add Procfile"
   git push heroku master
   ```

### Database Configuration
1. **Install Postgres**:
   ```bash
   pip install psycopg2-binary
   ```
2. **Update `requirements.txt`**:
   ```bash
   pip freeze > requirements.txt
   ```
3. **Modify `settings.py` for Postgres**:
   ```python
   import dj_database_url
   DATABASES['default'] = dj_database_url.config(conn_max_age=600)
   ```

### Running Migrations
1. **Run Migrations on Heroku**:
   ```bash
   heroku run python manage.py migrate
   ```

### Environment Variables
1. **Set Environment Variables**:
   ```bash
   heroku config:set SECRET_KEY='your_secret_key'
   heroku config:set DEBUG=False
   ```
2. **Update `settings.py`**:
   ```python
   SECRET_KEY = os.environ.get('SECRET_KEY')
   DEBUG = (os.environ.get('DEBUG_VALUE') == 'True')
   ```

### Final Steps
1. **Create Superuser**:
   ```bash
   heroku run python manage.py createsuperuser
   ```
2. **Open App**:
   ```bash
   heroku open
   ```

## Necessary Code Snippets

### `requirements.txt`
```txt
django==3.0
gunicorn
psycopg2-binary
dj-database-url
whitenoise
```

### `settings.py` Modifications
```python
import dj_database_url

# Static files (CSS, JavaScript, Images)
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')

# Database
DATABASES = {
    'default': dj_database_url.config(conn_max_age=600)
}

# Security
SECRET_KEY = os.environ.get('SECRET_KEY')
DEBUG = (os.environ.get('DEBUG_VALUE') == 'True')
ALLOWED_HOSTS = ['your-heroku-app.herokuapp.com']
```

### `Procfile`
```txt
web: gunicorn myproject.wsgi
```

### Deploy Commands
```bash
# Commit changes
git add .
git commit -m "Your commit message"
git push heroku master

# Migrations
heroku run python manage.py migrate

# Create superuser
heroku run python manage.py createsuperuser

# Open app
heroku open
```