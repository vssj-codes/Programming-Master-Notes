## Python Django Tutorial: Full-Featured Web App Part 12 - Email and Password Reset - YouTube

### Key Insights

- **Introduction**
  - Learn how to use Django's built-in functionality to allow users to reset their passwords via email.
  - Use secure tokens to ensure that only the specific user can reset their password.

- **URLs Setup**
  - Add password reset views to the project's URL configuration.
  - Create URL patterns for password reset, password reset done, password reset confirm, and password reset complete.

- **Password Reset View**
  - Use `PasswordResetView` to render a form for users to submit their email for password reset.
  - Create `password_reset.html` template for this form.

- **Password Reset Done View**
  - Use `PasswordResetDoneView` to display a confirmation page after the email is sent.
  - Create `password_reset_done.html` template to inform the user to check their email.

- **Password Reset Confirm View**
  - Use `PasswordResetConfirmView` to allow users to set a new password.
  - URL parameters include `uidb64` (user ID in base64) and `token` for security.
  - Create `password_reset_confirm.html` template for the password reset form.

- **Password Reset Complete View**
  - Use `PasswordResetCompleteView` to display a success message after the password is reset.
  - Create `password_reset_complete.html` template to inform the user their password has been reset and provide a login link.

- **Email Configuration**
  - Configure email settings in `settings.py` for sending emails using Gmail.
  - Add necessary email backend, host, port, TLS, and environment variables for email user and password.

- **Testing the Flow**
  - Verify the entire password reset flow from submitting the email to resetting the password and confirming it works.

- **Adding Reset Link**
  - Add a "Forgot Password?" link to the login page for easy access to the password reset form.

### Code Snippets

#### URLs Configuration
```python
# urls.py
from django.urls import path
from django.contrib.auth import views as auth_views

urlpatterns = [
    # Other URLs...
    path('password-reset/', 
         auth_views.PasswordResetView.as_view(template_name='users/password_reset.html'), 
         name='password_reset'),
    path('password-reset/done/', 
         auth_views.PasswordResetDoneView.as_view(template_name='users/password_reset_done.html'), 
         name='password_reset_done'),
    path('password-reset-confirm/<uidb64>/<token>/', 
         auth_views.PasswordResetConfirmView.as_view(template_name='users/password_reset_confirm.html'), 
         name='password_reset_confirm'),
    path('password-reset-complete/', 
         auth_views.PasswordResetCompleteView.as_view(template_name='users/password_reset_complete.html'), 
         name='password_reset_complete'),
]
```

#### Password Reset Form Template
```html

{% extends "base_generic.html" %}
{% block content %}
  <h2>Reset Password</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Request Password Reset</button>
  </form>
{% endblock %}
```

#### Password Reset Done Template
```html

{% extends "base_generic.html" %}
{% block content %}
  <div class="alert alert-info" role="alert">
    An email has been sent with instructions to reset your password.
  </div>
{% endblock %}
```

#### Password Reset Confirm Template
```html

{% extends "base_generic.html" %}
{% block content %}
  <h2>Reset Password</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Reset Password</button>
  </form>
{% endblock %}
```

#### Password Reset Complete Template
```html

{% extends "base_generic.html" %}
{% block content %}
  <div class="alert alert-success" role="alert">
    Your password has been set. You can now <a href="{% url 'login' %}">sign in</a>.
  </div>
{% endblock %}
```

#### Email Configuration in `settings.py`
```python
# settings.py
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = os.environ.get('EMAIL_USER')
EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_PASS')
```

#### Adding Reset Link to Login Template
```html

{% extends "base_generic.html" %}
{% block content %}
  <h2>Login</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Login</button>
  </form>
  <small class="text-muted ml-2">
    <a href="{% url 'password_reset' %}">Forgot Password?</a>
  </small>
{% endblock %}
```

These insights and code snippets should provide a clear understanding of implementing an email and password reset functionality in a Django web application.