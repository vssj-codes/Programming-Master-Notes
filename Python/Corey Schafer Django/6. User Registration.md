# Python Django Tutorial: Full-Featured Web App Part 6 - User Registration

## Key Insights

### Creating a New App for User Management
- Create a new app for user-related functionalities:
  ```bash
  python manage.py startapp users
  # startapp enti, create app antey bagundedi...
  ```
- Add the new app to `INSTALLED_APPS` in `settings.py`:
  ```python
  INSTALLED_APPS = [
      ...
      'users.apps.UsersConfig',
  ]
  ```

### Creating the Registration View
- TODO: Get to know what all features/forms/tables django provides by default? 
- Define the registration view in `views.py`:
  ```python
  from django.shortcuts import render, redirect
  from django.contrib.auth.forms import UserCreationForm
  from django.contrib import messages

  def register(request):
      if request.method == 'POST':
          form = UserCreationForm(request.POST)
          if form.is_valid():
              form.save()
              username = form.cleaned_data.get('username')
              messages.success(request, f'Account created for {username}!')
              return redirect('blog-home')
      else:
          form = UserCreationForm()
      return render(request, 'users/register.html', {'form': form})
  ```

### Creating the Registration Template
- Create `register.html` in the `templates/users` directory:
  ```html
  {% extends "blog/base.html" %}
  {% load crispy_forms_tags %}

  {% block content %}
    <div class="content-section">
      <form method="POST">
        {% csrf_token %}
        <fieldset class="form-group">
          <legend class="border-bottom mb-4">Join Today</legend>
          {{ form|crispy }}
        </fieldset>
        <div class="form-group">
          <button type="submit" class="btn btn-outline-info">Sign Up</button>
        </div>
      </form>
      <div class="border-top pt-3">
        <small class="text-muted">
          Already have an account? <a href="#">Sign In</a>
        </small>
      </div>
    </div>
  {% endblock %}
  ```

### Adding User Feedback Messages
- Import and use Django messages for user feedback:
  ```python
  from django.contrib import messages

  # In the view after form.save():
  messages.success(request, f'Account created for {username}!')
  ```

- Update `base.html` to display messages:
  ```html
  {% if messages %}
    <div class="alert alert-{{ message.tags }}">
      {{ message }}
    </div>
  {% endif %}
  ```

### Using Crispy Forms for Better Styling
- Install crispy forms:
  ```bash
  pip install django-crispy-forms
  ```
- Add crispy forms to `INSTALLED_APPS` and configure for Bootstrap 4 in `settings.py`:
  ```python
  INSTALLED_APPS = [
      ...
      'crispy_forms',
  ]
  CRISPY_TEMPLATE_PACK = 'bootstrap4'
  ```

### Extending the User Creation Form
- Create a custom user registration form in `forms.py`:
  ```python
  from django import forms
  from django.contrib.auth.models import User
  from django.contrib.auth.forms import UserCreationForm

  class UserRegisterForm(UserCreationForm):
      email = forms.EmailField()

      class Meta:
          model = User
          fields = ['username', 'email', 'password1', 'password2']
  ```

- Update the registration view to use the custom form:
  ```python
  from .forms import UserRegisterForm

  def register(request):
      if request.method == 'POST':
          form = UserRegisterForm(request.POST)
          if form.is_valid():
              form.save()
              username = form.cleaned_data.get('username')
              messages.success(request, f'Account created for {username}!')
              return redirect('blog-home')
      else:
          form = UserRegisterForm()
      return render(request, 'users/register.html', {'form': form})
  ```

By following these steps, you will have created a user registration page with Django, utilizing forms for input validation and user feedback, and applying styling using crispy forms. This setup ensures a seamless user experience for account creation in your web application.