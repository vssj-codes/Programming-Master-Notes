# Python Django Tutorial: Full-Featured Web App Part 11 - Pagination - YouTube

## Key Insights

- **Introduction to Pagination**
  - Adds functionality to the site by paginating posts to avoid pulling too many at once.
  - Creates a user-specific page of posts with pagination.

- **Adding Posts for Testing Pagination**
  - A script can be used in the Django shell to add posts from a JSON file.
  - Script example:
    ```python
    import json
    from blog.models import Post
    
    with open('post.json') as f:
        posts_json = json.load(f)
        
    for post in posts_json:
        Post.objects.create(
            title=post['title'],
            content=post['content'],
            author_id=post['user_id']
        )
    ```

- **Implementing Pagination**
  - Use Django's `Paginator` class.
  - Example to create a paginator:
    ```python
    from django.core.paginator import Paginator

    posts = ['post1', 'post2', 'post3', 'post4', 'post5']
    paginator = Paginator(posts, 2)  # 2 posts per page
    ```

- **Using Paginator in Views**
  - Class-based views make pagination easier.
  - Example:
    ```python
    from django.views.generic import ListView
    from .models import Post

    class PostListView(ListView):
        model = Post
        template_name = 'blog/home.html'
        context_object_name = 'posts'
        ordering = ['-date_posted']
        paginate_by = 5
    ```

- **Modifying Templates for Pagination**
  - Add pagination logic to templates.
  - Example in `home.html`:
    ```html
    {% if is_paginated %}
      <nav aria-label="Page navigation">
        <ul class="pagination">
          {% if page_obj.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page=1">First</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
            </li>
          {% endif %}

          {% for num in page_obj.paginator.page_range %}
            {% if num == page_obj.number %}
              <li class="page-item active">
                <a class="page-link" href="#">{{ num }}</a>
              </li>
            {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
              <li class="page-item">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
              </li>
            {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
            </li>
          {% endif %}
        </ul>
      </nav>
    {% endif %}
    ```

- **Filtering Posts by User**
  - Add functionality to display posts by a specific user with pagination.
  - Example in `views.py`:
    ```python
    from django.contrib.auth.models import User
    from django.shortcuts import get_object_or_404

    class UserPostListView(ListView):
        model = Post
        template_name = 'blog/user_posts.html'
        context_object_name = 'posts'
        paginate_by = 5

        def get_queryset(self):
            user = get_object_or_404(User, username=self.kwargs.get('username'))
            return Post.objects.filter(author=user).order_by('-date_posted')
    ```

- **Creating URL Patterns**
  - Example in `urls.py`:
    ```python
    from django.urls import path
    from .views import UserPostListView

    urlpatterns = [
        path('user/<str:username>/', UserPostListView.as_view(), name='user-posts'),
    ]
    ```

- **Creating User-Specific Post Template**
  - Example in `user_posts.html`:
    ```html
    {% extends "blog/base.html" %}
    {% block content %}
      <h2>Posts by {{ view.kwargs.username }} ({{ page_obj.paginator.count }})</h2>
      {% for post in posts %}
        <article class="media content-section">
          <div class="media-body">
            <div class="article-metadata">
              <a class="mr-2" href="{% url 'user-posts' post.author.username %}">{{ post.author }}</a>
              <small class="text-muted">{{ post.date_posted }}</small>
            </div>
            <h2><a class="article-title" href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h2>
            <p class="article-content">{{ post.content }}</p>
          </div>
        </article>
      {% endfor %}
      {% include 'blog/pagination.html' %}
    {% endblock content %}
    ```

This guide covers all the key points and necessary code snippets to implement pagination and user-specific post filtering in a Django web application.